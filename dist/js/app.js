window.UI={},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(a){var b={};b.Interface=function(a,b){var c,d,e;return c=a&&b?a:this,d=a&&b?b:a?a:"interface"+Math.random().toString(),e=function(a){return a.isInterface=!0,a.name=d,c[d]=a,c[d]}},b.Module=function(a,b){var c,d,e,f;return c=a&&b?a:this,d=a&&b?b:a?a:"module"+Math.random().toString(),f={moduleName:d,prototype:{},__includedModules:[],include:function(a){var b;for(b in a)a.hasOwnProperty(b)&&"prototype"!==b&&"isModule"!==b&&"__includedModules"!==b&&"include"!==b&&"moduleName"!==b&&(f[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(f.prototype[b]=a.prototype[b]);return this.__includedModules.push(a),this}},e=function(a){var b;f.isModule=!0;for(b in a)a.hasOwnProperty(b)&&"prototype"!==b&&"isModule"!==b&&"__includedModules"!==b&&"include"!==b&&"moduleName"!==b&&(f[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(f.prototype[b]=a.prototype[b]);return c[d]=f,c[d]},e.includes=function(){for(var a=0;a<arguments.length;a++)f.include(arguments[a]);return e},e},b.Class=function(a,b){var c,d,e;return c=a&&b?a:this,b=a&&b?b:a?a:"class"+Math.random().toString(),d=function(){this.init&&this.init.apply(this,arguments)},d.__descendants=[],d.__implementedInterfaces=[],d.__includedModules=[],d.className=b,d.include=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"prototype"!=b&&"constructor"!=b&&"isModule"!=b&&"include"!=b&&"superClass"!=b&&(d[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(d.prototype[b]=a.prototype[b]);else a.prototype={};return d.__includedModules.push(a),this},e=function(a){var e,f,g,h,i,j=a.prototype;if(j){for(i in j)j.hasOwnProperty(i)&&(d.prototype[i]=j[i]);delete a.prototype}for(i in a)a.hasOwnProperty(i)&&(d[i]=a[i]);for(e=0,f=d.__implementedInterfaces.length;f>e;e++){for(g=0,h=d.__implementedInterfaces[e].constructor.length;h>g;g++)if(!d[d.__implementedInterfaces[e].constructor[g]]){console.log("must implement static "+d.__implementedInterfaces[e].name);break}if(d.__implementedInterfaces[e].hasOwnProperty("prototype")&&d.__implementedInterfaces[e].prototype)for(g=0,h=d.__implementedInterfaces[e].prototype.length;h>g;g++)if(!d.prototype[d.__implementedInterfaces[e].prototype[g]]){console.log("must implement prototype "+d.__implementedInterfaces[e].name);break}}return c[b]=d,d},e.inherits=function(a){var b,c;d.superClass=a,a.hasOwnProperty("__descendants")&&a.__descendants.push(d),c=function(){},c.prototype=a.prototype,d.prototype=new c,d.prototype.constructor=d;for(b in a)a.hasOwnProperty(b)&&"prototype"!=b&&"className"!==b&&"superClass"!==b&&"include"!==b&&"__descendants"!=b&&(d[b]=a[b]);return delete this.inherits,this},e.ensures=function(){for(var a=0;a<arguments.length;a++)d.__implementedInterfaces.push(arguments[a]);return delete this.ensures,e},e.includes=function(){for(var a=0;a<arguments.length;a++)d.include(arguments[a]);return e},e},"function"==typeof define?define(function(){return b}):(a.Class=b.Class,a.Module=b.Module,a.Interface=b.Interface)}("undefined"!=typeof window?window:"undefined"!=typeof exports?exports:null),Module("CustomEventSupport")({eventListeners:null,bind:function(a,b){var c,d;this.hasOwnProperty("eventListeners")||(this.eventListeners={}),this.eventListeners[a]||(this.eventListeners[a]=[]),c=!1,d=this.eventListeners[a];for(var e=0;e<d.length;e++)if(d[e]==b){c=!0;break}return c||this.eventListeners[a].push(b),this},unbind:function(a,b){var c,d,e;for(d=!1,this.eventListeners||(this.eventListeners={}),"undefined"==typeof b&&(this.eventListeners[a]=[]),c=0;c<e.length;c++)if(e[c]==b){d=!0;break}return d&&this.eventListeners[a].splice(c,1),this},dispatch:function(a,b){var c,d,e;this.eventListeners||(this.eventListeners={}),c=new CustomEvent(a,b),c.target=this,d=this.eventListeners[a]||[],e=!0;for(var f=0;f<d.length&&(d[f].call(this,c),!c.areImmediateHandlersPrevented);f++);return c},prototype:{eventListeners:null,bind:function(a,b){var c;this.eventListeners||(this.eventListeners={}),this.eventListeners[a]||(this.eventListeners[a]=[]),c=!1;for(var d=0;d<this.eventListeners.length;d++)if(this.eventListeners[d]==b){c=!0;break}return c||this.eventListeners[a].push(b),this},unbind:function(a,b){var c,d,e;for(d=!1,this.eventListeners||(this.eventListeners={}),"undefined"==typeof b&&(this.eventListeners[a]=[]),c=0;c<e.length;c++)if(e[c]==b){d=!0;break}return d&&this.eventListeners[a].splice(c,1),this},dispatch:function(a,b){var c,d,e;this.eventListeners||(this.eventListeners={}),c=new CustomEvent(a,b),c.target=this,d=this.eventListeners[a]||[],e=!0;for(var f=0;f<d.length&&(d[f].call(this,c),!c.areImmediateHandlersPrevented);f++);return c}}}),NodeSupport=Module("NodeSupport")({prototype:{parent:null,children:[],appendChild:function(a){return a.parent&&a.parent.removeChild(a),this.hasOwnProperty("children")||(this.children=[]),this.children.push(a),this[a.name]=a,a.setParent(this),a},insertBefore:function(a,b){var c;return a.parent&&a.parent.removeChild(a),this.hasOwnProperty("children")||(this.children=[]),"undefined"==typeof b?this.appendChild(a):(c=this.children.indexOf(b),this.children.splice(c,0,a),this[a.name]=a,a.setParent(this)),a},insertChild:function(a,b){return console.warn("NodeSupport insertChild method is deprecated, try insertBefore"),a.parent&&a.parent.removeChild(a),this.hasOwnProperty("children")||(this.children=[]),"undefined"==typeof b?(this.children.push(a),this[a.name]=a,a.setParent(this),a):(this.children.splice(b,0,a),this[a.name]=a,a.setParent(this),a)},removeChild:function(a){var b=this.children.indexOf(a);return-1!==b&&(this.children.splice(b,1),delete this[a.name],a.parent=null),a},setParent:function(a){return this.parent=a,this},getDescendants:function(){var a=[];return this.children.forEach(function(b){a.push(b)}),this.children.forEach(function(b){a=a.concat(b.getDescendants())}),a},getPreviousSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[0]!==this?this.parent.children[this.parent.children.indexOf(this)-1]:void 0},getNextSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[this.parent.children.length-1]!==this?this.parent.children[this.parent.children.indexOf(this)+1]:void 0}}}),function(a){"use strict";a.Values=function(a){this.hex="#000000",this.rgb="rgb(0, 0, 0)",this.rgba="rgba(0, 0, 0, 0)",this.hsl="hsl(0, 0%, 0%)",this.hsla="hsla(0, 0%, 0%, 0)",this.brightness=0,this.step=1,this.tints=[],this.shades=[],this.all=[],this._rgb={r:0,g:0,b:0},this._rgba={r:0,g:0,b:0,a:0},this._hsl={h:0,s:0,l:0},this._hsla={h:0,s:0,l:0,a:0},"string"==typeof a&&this.setColor(a)},Values.Utils={isHEX:function(a){return/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(a)},isRGB:function(a){return/^\s*rgba?\s*\((\d+)\,\s*(\d+)\,\s*(\d+)(,\s*(\d+(\.\d+)?))?\)\s*$/.test(a)},RGBA:function(a,c){var d=b(a);return"rgba("+d.r+", "+d.g+", "+d.b+", "+c+")"}};var b=function(a){var b,c,d;return a=a.replace("#",""),6===a.length?(b=parseInt(a.slice(0,2),16),c=parseInt(a.slice(2,4),16),d=parseInt(a.slice(4,6),16)):(b=parseInt(a.slice(0,1)+a.slice(0,1),16),c=parseInt(a.slice(1,2)+a.slice(1,2),16),d=parseInt(a.slice(2,3)+a.slice(2,3),16)),{r:b,g:c,b:d}},c=function(a,b,c){return a=parseInt(a).toString(16),b=parseInt(b).toString(16),c=parseInt(c).toString(16),a=1===a.length?"0"+a:a,b=1===b.length?"0"+b:b,c=1===c.length?"0"+c:c,"#"+a+b+c},d=function(a,b,c){var d,e,a=a/255,b=b/255,c=c/255,f=Math.max(a,b,c),g=Math.min(a,b,c),h=(f+g)/2;if(f===g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}},e=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},f=function(a,b,c){var d,f,g;if(0==b)d=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=e(i,h,a+1/3),f=e(i,h,a),g=e(i,h,a-1/3)}return{r:255*d,g:255*f,b:255*g}},g=function(a){var b=a.r+a.g+a.b;return Math.round(b/765*100)},h=function(a,b,d,e,f){var h=Math.round(b.r),i=Math.round(b.g),j=Math.round(b.b);return a._rgb={r:h,g:i,b:j},a._hsl={h:d,s:e,l:f},a.hex=c(h,i,j),a._rgba=a._rgb.a=1,a._hsla=a._hsl.a=1,a.rgb="rgb("+h+", "+i+", "+j+")",a.rgba="rgba("+h+", "+i+", "+j+", 1)",a.hsl="hsl("+d+", "+e+"%, "+f+"%)",a.hsla="hsla("+d+", "+e+"%, "+f+"%, 1)",a.brightness=g(a._rgb),a};Values.prototype.setColor=function(a){var e,f,g,i,j,k;if(Values.Utils.isHEX(a)&&(/^#/.test(a)||(a="#"+a),e=a),Values.Utils.isRGB(a)){var l=a.replace(/[^\d,]/g,"").split(",");e=c(l[0],l[1],l[2])}return f=b(e),g=d(f.r,f.g,f.b),i=Math.round(360*g.h),j=Math.round(100*g.s),k=Math.round(100*g.l),h(this,f,i,j,k),this.step=1,this.__updateValues(),this},Values.prototype.setStep=function(a){return this.step=a,this.__updateValues(),this},Values.prototype.getTints=function(a){var b=this.tints;return a&&(b=b.concat(this.__getCurrent())),b},Values.prototype.getShades=function(a){var b=this.shades;return a&&(b=[this.__getCurrent()].concat(b)),b},Values.prototype.getAll=function(){return this.all},Values.prototype.lightness=function i(a){if("number"==typeof a){var b=this._hsl.h,c=this._hsl.s,d=this._hsl.l,e=d+a;0>e&&(i=0),e>100&&(i=100);var g=f(b/360,c/100,e/100),j=h({},g,b,c,e);return j}console.error("lightness expects a number")},Values.prototype.__updateValues=function(){this.tints=this.__getTints(),this.shades=this.__getShades(),this.all=this.tints.concat(this.__getCurrent(),this.shades)},Values.prototype.__getCurrent=function(){return h({},this._rgb,this._hsl.h,this._hsl.s,this._hsl.l)},Values.prototype.__getTints=function(){for(var a=this._hsl.h,b=this._hsl.s,c=this._hsl.l,d=100,e=[];d>parseInt(c,10);){var g=f(a/360,b/100,d/100);e[e.length]=h({},g,a,b,d),d-=this.step}return e},Values.prototype.__getShades=function(){for(var a=this._hsl.h,b=this._hsl.s,c=this._hsl.l,d=0,e=[];d<parseInt(c,10);){var g=f(a/360,b/100,d/100);e[e.length]=h({},g,a,b,d),d+=this.step}return e.reverse()}}(window),Class("Widget").includes(CustomEventSupport,NodeSupport)({ELEMENT_NODE_TYPE:"DIV",HTML:"",ELEMENT_CLASS:"widget",prototype:{active:!1,disabled:!1,__destroyed:!1,init:function(a){Object.keys(a||{}).forEach(function(b){this[b]=a[b]},this),null==this.element&&(this.element=document.createElement(this.constructor.ELEMENT_NODE_TYPE),this.element.innerHTML=this.constructor.HTML.replace(/\s\s+/g,""),this.element.className+=this.constructor.ELEMENT_CLASS),this.hasOwnProperty("className")===!0&&this.element.className(this.className)},_activate:function(){this.active=!0,this.element.addClass("active")},activate:function(a){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeActivate"),this._activate(a),this.dispatch("activate"),this},_deactivate:function(){this.active=!1,this.element.removeClass("active")},deactivate:function(a){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDeactivate"),this._deactivate(a),this.dispatch("deactivate"),this},_enable:function(){this.disabled=!1,this.element.removeClass("disable")},enable:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeEnable"),this._enable(),this.dispatch("enable"),this},_disable:function(){this.disabled=!0,this.element.addClass("disable")},disable:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDisable"),this._disable(),this.dispatch("disable"),this},_destroy:function(){var a;if(this.element&&this.element.remove(),null!==this.children)for(a=this.children.length;a>0;)this.children[0].destroy(),this.children.length===a&&this.children.shift(),a--;this.parent&&this.parent.removeChild(this),this.children=null,this.element=null},destroy:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDestroy"),this._destroy(),this.dispatch("destroy"),this.eventListeners=null,this.__destroyed=!0,null},render:function(a,b){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeRender",{element:a,beforeElement:b}),b?this.element.insertBefore(b):a.appendChild(this.element),this.dispatch("render"),this}}}),Class(UI,"ColorsCollection").inherits(Widget)({ELEMENT_CLASS:"colors-wrapper",HTML:'        <div class="main-container scroll" role="main-content">        </div>    ',prototype:{init:function(a){Widget.prototype.init.call(this,a),this.cached=[],this._storeInMemory(100),this.bindings()},_storeInMemory:function(a){for(var b=0;a>b;b++)this.cached.push(new UI.Color);b=a=null},bindings:function(){for(var a=0,b=this.cached.length;b>a;a++)this.appendChild(this.cached[a]).render(this.element);a=b=null}}}),Class(UI,"Color").inherits(Widget)({ELEMENT_NODE_TYPE:"DIV",ELEMENT_CLASS:"item",HTML:'        <div class="item__inner">            <p class="hex--label">#000</p>            <p class="rgb--label">rgb(0, 0, 0)</p>            <p class="hsl--label">hsl(0, 100%, 0%)</p>        </div>    ',prototype:{init:function(a){Widget.prototype.init.call(this,a),this.inner=this.element.querySelector(".item__inner"),this.hexLabel=this.element.querySelector(".hex--label"),this.rgbLabel=this.element.querySelector(".rgb--label"),this.hslLabel=this.element.querySelector(".hsl--label")}}}),Class(UI,"App").inherits(Widget)({prototype:{values:null,current_color:null,step:1,hash:window.location.hash,init:function(){this.ui={colorPicker:document.querySelector('[type="color"]'),preview:document.querySelector(".preview__color"),checkboxes:document.querySelectorAll('[type="checkbox"]'),input:document.querySelector('[name="input"]'),randomColorBtn:document.querySelector(".random-color-btn"),creditsBtn:document.querySelector(".credits-btn"),creditsModal:document.querySelector(".modal.credits"),closeModal:document.querySelector(".modal__close")},this.colors=new UI.ColorsCollection({name:"colors",element:document.querySelector(".main-container")}),this.ui.checkboxes[0].checked=!0,this.ui.checkboxes[1].checked=!0,this.checkboxUpdated(this.ui.checkboxes[0]),this.checkboxUpdated(this.ui.checkboxes[1]);var a=this._isValidColorModel(this.hash)?this.hash:this.generateRandomColor();this.printValues(a),this.bindings(),a=null},generateRandomColor:function(){return"#"+Math.random().toString(16).slice(2,8)},bindings:function(){window.addEventListener("hashchange",this.checkHash.bind(this),!1),this.ui.preview.addEventListener("click",this.showColorPicker.bind(this),!1),this.ui.colorPicker.addEventListener("change",this.colorPickerUpdated.bind(this),!1),this.ui.input.addEventListener("keypress",this.checkInput.bind(this),!1),this.ui.randomColorBtn.addEventListener("click",this.randomColor.bind(this),!1),this.ui.creditsBtn.addEventListener("click",this.showModal.bind(this),!1),this.ui.creditsModal.addEventListener("click",this.checkBeforeCloseModal.bind(this),!1),this.ui.closeModal.addEventListener("click",this.closeModal.bind(this),!1);for(var a=0,b=this.ui.checkboxes.length;b>a;a++)this.ui.checkboxes[a].addEventListener("change",this.checkboxUpdated.bind(this,this.ui.checkboxes[a]),!1)},_isValidColorModel:function(a){return Values.Utils.isHEX(a)?!0:Values.Utils.isRGB(a)?!0:!1},checkHash:function(){var a=window.location.hash;this.hash!==a&&this._isValidColorModel(a)&&this.printValues(a),a=null},showColorPicker:function(){this.ui.colorPicker.click()},colorPickerUpdated:function(){this.printValues(this.ui.colorPicker.value)},checkInput:function(a){if(13===a.charCode){var b=this.ui.input.value;this._isValidColorModel(b)?(this.printValues(b),this.ui.input.classList.remove("error")):this.ui.input.classList.add("error"),b=null}},showModal:function(a){a.preventDefault(),this.ui.creditsModal.classList.add("active")},closeModal:function(){this.ui.creditsModal.classList.remove("active")},checkBeforeCloseModal:function(a){a.target.classList.contains("modal__wrapper")&&this.closeModal()},randomColor:function(){this.printValues(this.generateRandomColor())},checkboxUpdated:function(a){var b="show--"+a.id;this.colors.element.classList[a.checked?"add":"remove"](b),b=null},printValues:function(a){var b,c=this;return this.values=new Values(a).setStep(this.step),this.current_color=this.values.hex,this.updateHash(this.values.hex.toUpperCase()),this.updateUI(),this.colors.children.forEach(function(a,d){var e=c.colors.children[d],f=c.values.all[d],g=f.brightness>50?"#000":"#fff";e.element.classList.remove("original"),f.hex===c.values.hex&&(e.element.classList.add("original"),b=e.element),e.element.style.backgroundColor=f.hex,e.inner.style.color=g,e.hexLabel.textContent=f.hex,e.rgbLabel.textContent=f.rgba,e.hslLabel.textContent=f.hsla}),this.colors.element.scrollTop=0,void 0!==b&&(this.colors.element.scrollTop=b.getBoundingClientRect().top-225),values=b=null,this},updateUI:function(){this.ui.preview.style.backgroundColor=this.current_color,this.ui.colorPicker.value=this.current_color,this.ui.input.value=this.current_color},updateHash:function(a){return window.location.hash=a,this.hash=a,this}}});